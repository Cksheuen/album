# ğŸ“¸ Flutter ç›¸å†Œåº”ç”¨

> åŸºäº Flutter + GetX çš„ç°ä»£åŒ–å“åº”å¼ç›¸å†Œåº”ç”¨

## âœ¨ ç‰¹æ€§

- ğŸ¨ **GetX å“åº”å¼æ¶æ„** - å…¨é¢ä½¿ç”¨ Rx å“åº”å¼ç¼–ç¨‹
- ğŸ“± **æœ¬åœ°/ç½‘ç»œåŒæ¨¡å¼** - æ”¯æŒæœ¬åœ°å›¾ç‰‡å’Œ API åŠ¨æ€åŠ è½½
- ğŸ¯ **è‡ªå®šä¹‰æ»šåŠ¨æ¡** - å¸¦åˆ†ç»„æŒ‡ç¤ºå™¨çš„è™šæ‹ŸåŒ–æ»šåŠ¨
- ğŸ”„ **Hero åŠ¨ç”»** - æµç•…çš„å›¾ç‰‡è¿‡æ¸¡æ•ˆæœ
- ğŸ“Š **æ™ºèƒ½åˆ†ç»„** - æŒ‰å¹´/æœˆ/æ—¥è‡ªåŠ¨åˆ†ç»„
- âš¡ **æ€§èƒ½ä¼˜åŒ–** - è™šæ‹ŸåŒ–æ¸²æŸ“ + å›¾ç‰‡ç¼“å­˜
- ğŸ› ï¸ **è‡ªåŠ¨åŒ–è„šæœ¬** - ä¸€é”®æ‰«æ assets ç›®å½•

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
# å…‹éš†é¡¹ç›®
git clone <your-repo-url>
cd album

# å®‰è£…ä¾èµ–
flutter pub get
```

### 2. æ·»åŠ æœ¬åœ°å›¾ç‰‡ï¼ˆæ¨èæ–¹å¼ï¼‰

æœ¬åº”ç”¨é»˜è®¤ä½¿ç”¨æœ¬åœ° assets å›¾ç‰‡æ¨¡å¼ï¼Œæ— éœ€ç½‘ç»œè¿æ¥å³å¯è¿è¡Œã€‚

#### æ­¥éª¤ 1: å‡†å¤‡å›¾ç‰‡

å°†æ‚¨çš„å›¾ç‰‡æ–‡ä»¶ï¼ˆæ”¯æŒ `.jpg`, `.jpeg`, `.png` ç­‰æ ¼å¼ï¼‰æ”¾å…¥ `assets/imgs/` ç›®å½•ï¼š

```bash
# ç¤ºä¾‹ç›®å½•ç»“æ„
assets/imgs/
â”œâ”€â”€ photo1.jpg
â”œâ”€â”€ photo2.png
â”œâ”€â”€ photo3.jpg
â””â”€â”€ ...
```

#### æ­¥éª¤ 2: è¿è¡Œè‡ªåŠ¨æ‰«æè„šæœ¬

ä½¿ç”¨æä¾›çš„ Shell è„šæœ¬è‡ªåŠ¨ç”Ÿæˆå›¾ç‰‡åˆ—è¡¨ï¼š

```bash
# 1. æ·»åŠ æ‰§è¡Œæƒé™ï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼‰
chmod +x generate_assets.sh

# 2. è¿è¡Œè„šæœ¬
./generate_assets.sh
```

**è„šæœ¬åŠŸèƒ½**:
- è‡ªåŠ¨æ‰«æ `assets/imgs/` ç›®å½•ä¸‹çš„æ‰€æœ‰å›¾ç‰‡
- ç”Ÿæˆ `lib/common/utils/assets_image_manager.dart` æ–‡ä»¶
- åˆ›å»ºå›¾ç‰‡è·¯å¾„åˆ—è¡¨ï¼Œä¾›åº”ç”¨è¯»å–

**æ‰§è¡Œç»“æœç¤ºä¾‹**:
```bash
âœ… æˆåŠŸç”Ÿæˆ lib/common/utils/assets_image_manager.dart
ğŸ“Š æ‰¾åˆ° 20 ä¸ªæ–‡ä»¶
```

#### æ­¥éª¤ 3: æ›´æ–° pubspec.yamlï¼ˆå¦‚æœéœ€è¦ï¼‰

ç¡®ä¿ `pubspec.yaml` ä¸­å·²é…ç½® assets ç›®å½•ï¼š

```yaml
flutter:
  assets:
    - assets/imgs/
```

#### æ­¥éª¤ 4: è¿è¡Œåº”ç”¨

```bash
# é¦–æ¬¡è¿è¡Œæˆ–å®Œå…¨é‡å¯
flutter run

# çƒ­é‡è½½ï¼ˆå¦‚æœåº”ç”¨å·²è¿è¡Œï¼‰
æŒ‰ r é”®
```

### 3. éªŒè¯æœ¬åœ°å›¾ç‰‡åŠ è½½

å¯åŠ¨åº”ç”¨åï¼Œæ‚¨å°†çœ‹åˆ°ï¼š
- âœ… å°é¢å›¾ç‰‡æ­£ç¡®æ˜¾ç¤º
- âœ… ç›¸å†Œåˆ—è¡¨å±•ç¤ºæ‰€æœ‰æœ¬åœ°å›¾ç‰‡
- âœ… æŒ‰å¹´/æœˆ/æ—¥è‡ªåŠ¨åˆ†ç»„
- âœ… æ»šåŠ¨æ¡å¸¦åˆ†ç»„æŒ‡ç¤ºå™¨
- âœ… æ— éœ€ç½‘ç»œè¿æ¥

### 4. æ·»åŠ /ä¿®æ”¹å›¾ç‰‡

å¦‚æœéœ€è¦æ·»åŠ ã€åˆ é™¤æˆ–ä¿®æ”¹å›¾ç‰‡ï¼š

```bash
# 1. ä¿®æ”¹ assets/imgs/ ç›®å½•ä¸­çš„å›¾ç‰‡
#    - æ·»åŠ æ–°å›¾ç‰‡
#    - åˆ é™¤æ—§å›¾ç‰‡
#    - æ›¿æ¢ç°æœ‰å›¾ç‰‡

# 2. é‡æ–°è¿è¡Œè„šæœ¬
./generate_assets.sh

# 3. é‡æ–°åŠ è½½åº”ç”¨
#    - çƒ­é‡è½½: æŒ‰ r é”®
#    - æˆ–å®Œå…¨é‡å¯: flutter run
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### æœ¬åœ°å›¾ç‰‡æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰

**ä¼˜åŠ¿**:
- âš¡ ç¬é—´åŠ è½½ï¼Œæ— å»¶è¿Ÿ
- ğŸ”’ æ— éœ€ç½‘ç»œè¿æ¥
- ğŸ’¾ èŠ‚çœæµé‡
- ğŸ¯ é€‚åˆå›ºå®šå›¾ç‰‡é›†åˆ

**é€‚ç”¨åœºæ™¯**:
- ä¸ªäººç›¸å†Œå±•ç¤º
- Demo æ¼”ç¤º
- ç¦»çº¿åº”ç”¨

### API ç½‘ç»œæ¨¡å¼ï¼ˆå¯é€‰ï¼‰

å¦‚éœ€åˆ‡æ¢åˆ° API æ¨¡å¼ï¼Œåœ¨åº”ç”¨ä¸­è°ƒç”¨ï¼š

```dart
// åˆ‡æ¢åˆ° API æ¨¡å¼
await controller.switchToApiMode();

// åˆ‡æ¢å›æœ¬åœ°æ¨¡å¼
controller.switchToLocalMode();
```

**ä¼˜åŠ¿**:
- ğŸŒ åŠ¨æ€å†…å®¹åŠ è½½
- ğŸ“ˆ æ”¯æŒåˆ†é¡µåŠ è½½
- ğŸ”„ è‡ªåŠ¨æ›´æ–°æ•°æ®

## ğŸ—ï¸ æŠ€æœ¯æ ˆ

- **Flutter** 3.9.2
- **Dart SDK** ^3.9.2
- **GetX** 4.7.2 - çŠ¶æ€ç®¡ç† + è·¯ç”±
- **HTTP** 1.2.0 - ç½‘ç»œè¯·æ±‚
- **CachedNetworkImage** 3.3.1 - å›¾ç‰‡ç¼“å­˜

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
lib/
â”œâ”€â”€ common/              # å…¬å…±ç»„ä»¶
â”‚   â”œâ”€â”€ routers/         # GetX è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ utils/           # å·¥å…·ç±»
â”‚   â”‚   â””â”€â”€ assets_image_manager.dart  # è‡ªåŠ¨ç”Ÿæˆçš„å›¾ç‰‡ç®¡ç†ç±»
â”‚   â””â”€â”€ widgets/         # é€šç”¨ç»„ä»¶
â”‚       â”œâ”€â”€ custom_scrollbar.dart      # è‡ªå®šä¹‰æ»šåŠ¨æ¡
â”‚       â””â”€â”€ photo_image.dart           # å›¾ç‰‡ç»„ä»¶
â”œâ”€â”€ models/              # æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ photo_model.dart               # ç…§ç‰‡æ¨¡å‹
â”œâ”€â”€ mock/                # Mock æ•°æ®
â”‚   â””â”€â”€ photo_mock_data.dart           # æœ¬åœ°æ•°æ®ç”Ÿæˆ
â”œâ”€â”€ pages/               # é¡µé¢
â”‚   â””â”€â”€ splash/          # ç›¸å†Œé¡µ (MVC æ¶æ„)
â”‚       â”œâ”€â”€ binding.dart               # GetX ç»‘å®š
â”‚       â”œâ”€â”€ controller.dart            # æ§åˆ¶å™¨
â”‚       â””â”€â”€ view.dart                  # è§†å›¾
â”œâ”€â”€ services/            # æœåŠ¡å±‚
â”‚   â””â”€â”€ api_photo_loader.dart          # API åŠ è½½æœåŠ¡
â””â”€â”€ main.dart            # åº”ç”¨å…¥å£

assets/
â””â”€â”€ imgs/                # æœ¬åœ°å›¾ç‰‡ç›®å½•
    â””â”€â”€ *.jpg            # æ‚¨çš„å›¾ç‰‡æ–‡ä»¶
```

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### 1. GetX å“åº”å¼æ¶æ„

```dart
// Controller - å®šä¹‰å“åº”å¼å˜é‡
final RxList<PhotoModel> photos = <PhotoModel>[].obs;

// View - è‡ªåŠ¨æ›´æ–° UI
Obx(() => Text('å…± ${controller.photos.length} å¼ '))
```

### 2. è‡ªå®šä¹‰æ»šåŠ¨æ¡

- ğŸ–±ï¸ æ‹–æ‹½å¿«é€Ÿæ»šåŠ¨
- ğŸ“ åˆ†ç»„æŒ‡ç¤ºå™¨æç¤º
- ğŸ¨ å®Œå…¨å“åº”å¼è®¾è®¡
- âœ¨ åŠ¨ç”»æ•ˆæœæµç•…

### 3. è™šæ‹ŸåŒ–æ¸²æŸ“

åªæ¸²æŸ“å¯è§†åŒºåŸŸ + ä¸Šä¸‹ç¼“å†²åŒºï¼Œä¼˜åŒ–å¤§åˆ—è¡¨æ€§èƒ½ï¼š
- âš¡ æ”¯æŒæ•°åƒå¼ å›¾ç‰‡æµç•…æ»šåŠ¨
- ğŸ’¾ å†…å­˜å ç”¨ä½
- ğŸ”„ æŒ‰éœ€åŠ è½½

### 4. æ™ºèƒ½åˆ†ç»„

```dart
// æŒ‰å¹´åˆ†ç»„
controller.changeGroupType(GroupType.year);

// æŒ‰æœˆåˆ†ç»„ï¼ˆé»˜è®¤ï¼‰
controller.changeGroupType(GroupType.month);

// æŒ‰æ—¥åˆ†ç»„
controller.changeGroupType(GroupType.day);
```

### 5. è‡ªåŠ¨åŒ–è„šæœ¬

`generate_assets.sh` è„šæœ¬åŠŸèƒ½ï¼š
- ğŸ“‚ è‡ªåŠ¨æ‰«æ `assets/imgs/` ç›®å½•
- ğŸ“ ç”Ÿæˆ Dart ä»£ç æ–‡ä»¶
- ğŸ”„ æ›´æ–°å›¾ç‰‡åˆ—è¡¨
- âœ… é›¶æ‰‹åŠ¨é…ç½®

## ğŸ”§ é…ç½®é€‰é¡¹

### ä¿®æ”¹åˆ†ç»„æ–¹å¼

åœ¨åº”ç”¨ä¸­åˆ‡æ¢åˆ†ç»„ï¼š

```dart
// æŒ‰å¹´
controller.changeGroupType(GroupType.year);

// æŒ‰æœˆ
controller.changeGroupType(GroupType.month);

// æŒ‰æ—¥
controller.changeGroupType(GroupType.day);
```

### ä¿®æ”¹æ’åºæ–¹å¼

```dart
// é™åºï¼ˆæ–°â†’æ—§ï¼Œé»˜è®¤ï¼‰
controller.changeSortType(SortType.dateDesc);

// å‡åºï¼ˆæ—§â†’æ–°ï¼‰
controller.changeSortType(SortType.dateAsc);
```

### æ ‡ç­¾ç­›é€‰

```dart
// æŒ‰æ ‡ç­¾ç­›é€‰
controller.filterByTag('é£æ™¯');

// æ¸…é™¤ç­›é€‰
controller.clearFilter();
```

## ğŸ“ å¼€å‘

### è¿è¡Œæµ‹è¯•

```bash
flutter test
```

### ä»£ç æ ¼å¼åŒ–

```bash
dart format .
```

### ä»£ç åˆ†æ

```bash
flutter analyze
```

### æ„å»ºå‘å¸ƒç‰ˆæœ¬

```bash
# Android
flutter build apk

# iOS
flutter build ios

# Web
flutter build web
```

## ğŸ“š æ–‡æ¡£

è¯¦ç»†æ–‡æ¡£è¯·æŸ¥çœ‹ï¼š

- ğŸ“– **[DEVELOPMENT.md](./DEVELOPMENT.md)** - å®Œæ•´å¼€å‘æ–‡æ¡£
  - æŠ€æœ¯æ ˆè¯¦è§£
  - ä¸‰ç§åŠ è½½æ¨¡å¼
  - GetX æœ€ä½³å®è·µ
  - API é›†æˆæŒ‡å—
  - æ€§èƒ½ä¼˜åŒ–æŠ€å·§

- ğŸ“– **[PROJECT_STRUCTURE.md](./PROJECT_STRUCTURE.md)** - é¡¹ç›®ç»“æ„è¯´æ˜
  - æ–‡ä»¶ç»„ç»‡æ¶æ„
  - ä¾èµ–å…³ç³»å›¾
  - æ ¸å¿ƒæ¨¡å—ä»‹ç»

- ğŸ“– **[OPTIMIZATION_SUMMARY.md](./OPTIMIZATION_SUMMARY.md)** - ä¼˜åŒ–æ€»ç»“
  - ä¼˜åŒ–å‰åå¯¹æ¯”
  - æ€§èƒ½æå‡æ•°æ®
  - æœ€ä½³å®è·µå»ºè®®

## ğŸ› å·²çŸ¥é—®é¢˜ä¿®å¤

æœ¬é¡¹ç›®å·²ä¿®å¤ä»¥ä¸‹é—®é¢˜ï¼š

- âœ… **Assets åŠ è½½"åŠ è½½æ›´å¤š"æç¤º** - [ASSETS_LOADING_FIX.md](./ASSETS_LOADING_FIX.md)
- âœ… **æ»šåŠ¨æ¡æ‹–æ‹½å¯¹é½é—®é¢˜** - [SCROLLBAR_BUG_FIX_FINAL.md](./SCROLLBAR_BUG_FIX_FINAL.md)
- âœ… **åˆ†ç»„åˆ‡æ¢æ»šåŠ¨æ¡æ›´æ–°** - [SCROLLBAR_GROUP_UPDATE_FIX.md](./SCROLLBAR_GROUP_UPDATE_FIX.md)

## â“ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•æ·»åŠ æ›´å¤šå›¾ç‰‡ï¼Ÿ

A: å°†å›¾ç‰‡æ”¾å…¥ `assets/imgs/` ç›®å½•ï¼Œç„¶åè¿è¡Œ `./generate_assets.sh`ï¼Œæœ€åé‡å¯åº”ç”¨ã€‚

### Q: ä¸ºä»€ä¹ˆå›¾ç‰‡ä¸æ˜¾ç¤ºï¼Ÿ

A: 
1. ç¡®è®¤å›¾ç‰‡åœ¨ `assets/imgs/` ç›®å½•
2. ç¡®è®¤å·²è¿è¡Œ `./generate_assets.sh`
3. ç¡®è®¤ `pubspec.yaml` ä¸­é…ç½®äº† `assets/imgs/`
4. å®Œå…¨é‡å¯åº”ç”¨ï¼ˆéçƒ­é‡è½½ï¼‰

### Q: å¦‚ä½•åˆ‡æ¢åˆ° API æ¨¡å¼ï¼Ÿ

A: åœ¨ `lib/pages/splash/controller.dart` ä¸­è°ƒç”¨ `switchToApiMode()`ã€‚

### Q: æ”¯æŒå“ªäº›å›¾ç‰‡æ ¼å¼ï¼Ÿ

A: æ”¯æŒ Flutter æ ‡å‡†çš„å›¾ç‰‡æ ¼å¼ï¼š`.jpg`, `.jpeg`, `.png`, `.gif`, `.webp`, `.bmp`ã€‚

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### è´¡çŒ®æŒ‡å—

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

---

**æ›´å¤šè¯¦æƒ…**: æŸ¥çœ‹ [DEVELOPMENT.md](./DEVELOPMENT.md) è·å–å®Œæ•´å¼€å‘æ–‡æ¡£
